{"version":3,"sources":["components/Users/index.jsx","components/Form/index.jsx","App.js","index.js"],"names":["User","token","useState","resData","setData","setError","value","setValue","a","url","fetch","headers","response","json","r","console","log","useEffect","postData","then","data","catch","e","message","searchData","length","filter","u","username","toLowerCase","includes","className","onChange","target","handleChangeName","sort","b","id","map","user","key","Form","setAuthorized","setToken","firstRender","useRef","disable","setDisabled","nameError","setNameError","passError","setPassError","userName","setUserName","password","setPassword","method","body","JSON","stringify","current","formValidation","name","placeholder","type","disabled","onClick","preventDefault","handleClick","App","isAuthorized","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6f8dd18e.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {fetch} from \"whatwg-fetch\";\r\n\r\nconst User = ({ token }) => {\r\n    const [resData, setData] = useState([]);\r\n\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const [value, setValue] = useState(\"\");\r\n\r\n    async function postData(url = '') {\r\n        const response = await fetch(url, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Token ${token}`\r\n            }\r\n        });\r\n        const r = await response.json();\r\n        console.log(r)\r\n        return r\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        \r\n        const res = postData('https://emphasoft-test-assignment.herokuapp.com/api/v1/users/')\r\n            .then(data => {\r\n                return setData(data)\r\n            }).catch(e => setError(e.message));\r\n    }, [token]);\r\n\r\n    \r\n\r\n    const handleChangeName = (e) =>{\r\n        setValue(e.target.value)\r\n    }\r\n        \r\n    const searchData = resData.length && resData.filter(u => u.username.toLowerCase().includes(value))\r\n    const data = value ? searchData : resData\r\n    console.log(data,\"data\")\r\n\r\n    return (\r\n        <div className=\"User\">\r\n            <input onChange={(e)=>handleChangeName(e)}/>\r\n            <ul>\r\n                {\r\n                    data.sort((a, b) => a.id - b.id).map(user => {\r\n                        return (\r\n                            <li key={user.id}>\r\n                                <span>User Name: {user.username}</span>\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default User;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport {fetch} from \"whatwg-fetch\";\r\nimport  './form.css'\r\n\r\nexport const Form = ({ setAuthorized, token, setToken }) => {\r\n\r\n    const firstRender = useRef(true)\r\n\r\n    const [disable, setDisabled] = useState(true)\r\n\r\n    const [nameError, setNameError] = useState(null)\r\n\r\n    const [passError, setPassError] = useState(null)\r\n\r\n    const [userName, setUserName] = useState(\"\")\r\n\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    \r\n\r\n    async function postData(url = '', data = {}) {\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await response.json();\r\n\r\n    }\r\n\r\n\r\n\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        setAuthorized(token)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        postData('https://emphasoft-test-assignment.herokuapp.com/api-token-auth/', {\r\n            \"username\": userName,\r\n            \"password\": password\r\n        }).then(data => {\r\n            setToken(data.token)\r\n            console.log(data.token)\r\n\r\n        })\r\n        if (firstRender.current) {\r\n            firstRender.current = false\r\n            return\r\n        }\r\n\r\n        setDisabled(formValidation())\r\n    }, [password, userName]);\r\n\r\n    const formValidation = () => {\r\n        if (userName === \"\") {\r\n            setNameError('Имя должно быть заполнено')\r\n            return true\r\n        } else if (password === \"\") {\r\n            setPassError('Пароль должен быть введен')\r\n            return true\r\n        } else if (setNameError(null)) {\r\n            return false\r\n        } else{\r\n             setPassError(null)\r\n            return false\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form className=\"form\">\r\n                <div className=\"form__input\">\r\n                    <div className=\"input\">\r\n                        <label>\r\n                            <input value={userName} onChange={e => setUserName(e.target.value)} name='username' placeholder=\"UserName\"/>  \r\n                        </label>\r\n                    </div>\r\n                    <div className=\"input\">\r\n                        <label>\r\n                            <input value={password} onChange={e => setPassword(e.target.value)} name='password' placeholder=\"Password\"/>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" disabled={disable} onClick={(e) => { handleClick(e) }} className=\"btn\">  send  </button>\r\n                <div className=\"err\">{nameError && <p>{nameError}</p>} \r\n                {passError && <p>{passError}</p>}\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, { useState } from 'react';\nimport './App.css';\nimport User from './components/Users';\nimport { Form } from './components/Form';\n\n\n\nconst App = () => {\n\nconst [isAuthorized,setAuthorized] = useState(false);\n\nconst [token, setToken] = useState(\"\");\n\n  return (\n    <div className=\"App\">\n      {isAuthorized ? <User token={token} /> : <Form setAuthorized={setAuthorized} token={token} setToken={setToken} />}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}