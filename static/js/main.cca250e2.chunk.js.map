{"version":3,"sources":["components/Users/index.jsx","components/Form/index.jsx","App.js","index.js"],"names":["User","token","useState","resData","setData","sortData","setSortData","setValue","sortUp","setSortUp","useEffect","a","url","fetch","headers","response","json","r","console","log","postData","then","data","catch","e","error","message","className","onChange","res","filter","u","username","toLowerCase","includes","target","value","handleChangeName","onClick","sort","b","id","sortDataUp","sortDataDown","map","user","key","Form","setAuthorized","setToken","firstRender","useRef","disable","setDisabled","nameError","setNameError","passError","setPassError","userName","setUserName","password","setPassword","method","body","JSON","stringify","current","formValidation","name","placeholder","type","disabled","preventDefault","handleClick","App","isAuthorized","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cca250e2.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { fetch } from \"whatwg-fetch\";\r\n\r\nconst User = ({ token }) => {\r\n    const [resData, setData] = useState([]);\r\n\r\n    const [sortData, setSortData] = useState([]);\r\n\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const [value, setValue] = useState(\"\");\r\n\r\n    const [sortUp, setSortUp] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function postData(url = '') {\r\n            const response = await fetch(url, {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Token ${token}`\r\n                }\r\n            });\r\n            const r = await response.json();\r\n            console.log(r)\r\n            return r\r\n\r\n        }\r\n\r\n\r\n\r\n        postData('https://emphasoft-test-assignment.herokuapp.com/api/v1/users/')\r\n            .then(data => {\r\n                setData(data);\r\n                setSortData(data);\r\n            })\r\n            .catch((e) => console.error(e.message));\r\n    }, [token]);\r\n\r\n\r\n    const sortDataUp = (data) => data.sort((a, b) => a.id - b.id);\r\n    const sortDataDown = (data) => data.sort((a, b) => b.id - a.id);\r\n    const handleSort = () => {\r\n        const data = sortUp ? sortDataUp(sortData) : sortDataDown(sortData);\r\n        setSortData(data);\r\n        setSortUp(!sortUp);\r\n    };\r\n\r\n\r\n    const handleChangeName = (e) => {\r\n        const res = resData.filter((u) => u.username.toLowerCase().includes(e.target.value.toLowerCase())\r\n        );\r\n    \r\n    setSortData(res);\r\n    setValue(e.target.value)\r\n}\r\n\r\n\r\n// const searchData = resData.length && resData.filter(u => u.username.toLowerCase().includes(value.toLowerCase()))\r\n// const data = value ? searchData : resData\r\n// console.log(data, \"data\")\r\n\r\n\r\n\r\nreturn (\r\n    <div className=\"User\">\r\n        <input onChange={(e) => handleChangeName(e)} />\r\n        <button onClick={handleSort}>SortID</button>\r\n        <ul>\r\n            {\r\n                sortData.map(user => {\r\n                    return (\r\n                        <li key={user.id}>\r\n                            <span>UserName: {user.username} userID: {user.id}</span>\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    </div>\r\n);\r\n}\r\n\r\nexport default User;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport {fetch} from \"whatwg-fetch\";\r\nimport  './form.css'\r\n\r\nexport const Form = ({ setAuthorized, token, setToken }) => {\r\n\r\n    const firstRender = useRef(true)\r\n\r\n    const [disable, setDisabled] = useState(true)\r\n\r\n    const [nameError, setNameError] = useState(null)\r\n\r\n    const [passError, setPassError] = useState(null)\r\n\r\n    const [userName, setUserName] = useState(\"\")\r\n\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    \r\n\r\n    async function postData(url = '', data = {}) {\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await response.json();\r\n\r\n    }\r\n\r\n\r\n\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        setAuthorized(token)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        postData('https://emphasoft-test-assignment.herokuapp.com/api-token-auth/', {\r\n            \"username\": userName,\r\n            \"password\": password\r\n        }).then(data => {\r\n            setToken(data.token)\r\n            console.log(data.token)\r\n\r\n        })\r\n        if (firstRender.current) {\r\n            firstRender.current = false\r\n            return\r\n        }\r\n\r\n        setDisabled(formValidation())\r\n    }, [password, userName]);\r\n\r\n    const formValidation = () => {\r\n        if (userName === \"\") {\r\n            setNameError('Имя должно быть заполнено')\r\n            return true\r\n        } else if (password === \"\") {\r\n            setPassError('Пароль должен быть введен')\r\n            return true\r\n        } else if (setNameError(null)) {\r\n            return false\r\n        } else{\r\n             setPassError(null)\r\n            return false\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form className=\"form\">\r\n                <div className=\"form__input\">\r\n                    <div className=\"input\">\r\n                        <label>\r\n                            <input value={userName} onChange={e => setUserName(e.target.value)} name='username' placeholder=\"UserName\"/>  \r\n                        </label>\r\n                    </div>\r\n                    <div className=\"input\">\r\n                        <label>\r\n                            <input value={password} onChange={e => setPassword(e.target.value)} name='password' placeholder=\"Password\"/>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" disabled={disable} onClick={(e) => { handleClick(e) }} className=\"btn\">  send  </button>\r\n                <div className=\"err\">{nameError && <p>{nameError}</p>} \r\n                {passError && <p>{passError}</p>}\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React, { useState } from 'react';\nimport './App.css';\nimport User from './components/Users';\nimport { Form } from './components/Form';\n\n\n\nconst App = () => {\n\nconst [isAuthorized,setAuthorized] = useState(false);\n\nconst [token, setToken] = useState(\"\");\n\n  return (\n    <div className=\"App\">\n      {isAuthorized ? <User token={token} /> : <Form setAuthorized={setAuthorized} token={token} setToken={setToken} />}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}